(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function u(){return`
    <header class="app-header">
      <div class="header-content">
        <div class="logo-section">
          <img src="/logo-freeagro.png" alt="FreeAgro" class="logo" />
        </div>
        <div class="header-title">
          <h1>FreeAgro Connect</h1>
          <p class="subtitle">Sistema de Gerenciamento EVOR X-30</p>
        </div>
        <div class="connection-status">
          <span class="status-indicator online"></span>
          <span class="status-text">EVOR X-30 Conectado</span>
        </div>
      </div>
    </header>
  `}function v(s){return`
    <nav class="navigation">
      ${[{id:"dashboard",icon:"??",label:"Dashboard"},{id:"scenarios",icon:"???",label:"Cen�rios"},{id:"missions",icon:"???",label:"Miss�es"},{id:"analytics",icon:"??",label:"An�lises"},{id:"vehicle",icon:"??",label:"Ve�culo"}].map(t=>`
        <button
          class="nav-button ${s===t.id?"active":""}"
          data-page="${t.id}"
        >
          <span class="nav-icon">${t.icon}</span>
          <span class="nav-label">${t.label}</span>
        </button>
      `).join("")}
    </nav>
  `}function p(){return'<div><div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px;"><div style="background: linear-gradient(135deg, #4ade80 0%, #22c55e 100%); padding: 25px; border-radius: 10px; color: white;"><div style="font-size: 14px; opacity: 0.9;">�rea Total</div><div style="font-size: 32px; font-weight: bold; margin: 10px 0;">156.8 ha</div><div style="font-size: 12px; opacity: 0.8;">+12.5 ha este m�s</div></div><div style="background: linear-gradient(135deg, #60a5fa 0%, #3b82f6 100%); padding: 25px; border-radius: 10px; color: white;"><div style="font-size: 14px; opacity: 0.9;">Miss�es Completas</div><div style="font-size: 32px; font-weight: bold; margin: 10px 0;">23</div><div style="font-size: 12px; opacity: 0.8;">+5 esta semana</div></div><div style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); padding: 25px; border-radius: 10px; color: white;"><div style="font-size: 14px; opacity: 0.9;">Efici�ncia M�dia</div><div style="font-size: 32px; font-weight: bold; margin: 10px 0;">94.5%</div><div style="font-size: 12px; opacity: 0.8;"> 2.3% vs. m�s anterior</div></div><div style="background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); padding: 25px; border-radius: 10px; color: white;"><div style="font-size: 14px; opacity: 0.9;">Combust�vel Economizado</div><div style="font-size: 32px; font-weight: bold; margin: 10px 0;">340L</div><div style="font-size: 12px; opacity: 0.8;">Equivalente a R$ 2.380</div></div></div><div id="field-map-container"></div></div>'}function m(){return`<div class="container"><h2 style="margin: 30px 0 20px; font-size: 28px;">Cen�rios de Campo</h2><button style="padding: 12px 24px; background: #4ade80; border: none; border-radius: 5px; color: #0a0e27; font-weight: bold; cursor: pointer; margin-bottom: 20px;">Novo Cen�rio</button><div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">${[{id:1,name:"Caf� Ar�bica - Lote A",area:"45 ha",crop:"Caf�",status:"Ativo"},{id:2,name:"Vinhedo Sul",area:"32 ha",crop:"Uva",status:"Ativo"},{id:3,name:"Pomar Norte",area:"28 ha",crop:"Laranja",status:"Inativo"}].map(e=>`<div style="background: #1a1f3a; padding: 25px; border-radius: 10px; border: 1px solid #2d3548; cursor: pointer; transition: transform 0.2s;" onmouseover="this.style.transform='translateY(-5px)'" onmouseout="this.style.transform='translateY(0)'"><h3 style="color: #4ade80; margin-bottom: 15px;">${e.name}</h3><div style="display: flex; flex-direction: column; gap: 10px;"><div style="display: flex; justify-content: space-between;"><span style="color: #888;">�rea:</span><span>${e.area}</span></div><div style="display: flex; justify-content: space-between;"><span style="color: #888;">Cultura:</span><span>${e.crop}</span></div><div style="display: flex; justify-content: space-between;"><span style="color: #888;">Status:</span><span style="color: ${e.status==="Ativo"?"#4ade80":"#888"};">${e.status}</span></div></div></div>`).join("")}</div></div>`}function g(){return`<div class="container"><h2 style="margin: 30px 0 20px; font-size: 28px;">Miss�es</h2><button style="padding: 12px 24px; background: #4ade80; border: none; border-radius: 5px; color: #0a0e27; font-weight: bold; cursor: pointer; margin-bottom: 20px;">Nova Miss�o</button><div style="display: flex; flex-direction: column; gap: 15px;">${[{id:1,name:"Patrulha Norte",status:"Em Progresso",progress:65},{id:2,name:"Inspe��o Caf�",status:"Pendente",progress:0},{id:3,name:"Vinhedo Sul",status:"Conclu�da",progress:100}].map(e=>`<div style="background: #1a1f3a; padding: 20px; border-radius: 10px; border: 1px solid #2d3548;"><div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;"><h3 style="color: #4ade80;">${e.name}</h3><span style="padding: 5px 10px; background: ${e.status==="Em Progresso"?"#3b82f6":e.status==="Conclu�da"?"#4ade80":"#666"}; border-radius: 5px; font-size: 12px;">${e.status}</span></div><div style="background: #0a0e27; height: 10px; border-radius: 5px; overflow: hidden;"><div style="width: ${e.progress}%; height: 100%; background: #4ade80;"></div></div><p style="margin-top: 10px; color: #888;">${e.progress}% conclu�do</p></div>`).join("")}</div></div>`}function x(){return'<div class="container"><h2 style="margin: 30px 0 20px; font-size: 28px;">An�lises e Relat�rios</h2><div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px;"><div style="background: #1a1f3a; padding: 25px; border-radius: 10px; border: 1px solid #2d3548;"><p style="color: #888; margin-bottom: 10px;">Total de Miss�es</p><p style="font-size: 32px; font-weight: bold; color: #4ade80;">127</p><p style="color: #888; font-size: 14px;">+12% este m�s</p></div><div style="background: #1a1f3a; padding: 25px; border-radius: 10px; border: 1px solid #2d3548;"><p style="color: #888; margin-bottom: 10px;">�rea Coberta</p><p style="font-size: 32px; font-weight: bold; color: #4ade80;">856 ha</p><p style="color: #888; font-size: 14px;">+8% este m�s</p></div><div style="background: #1a1f3a; padding: 25px; border-radius: 10px; border: 1px solid #2d3548;"><p style="color: #888; margin-bottom: 10px;">Tempo Opera��o</p><p style="font-size: 32px; font-weight: bold; color: #4ade80;">342h</p><p style="color: #888; font-size: 14px;">+15% este m�s</p></div><div style="background: #1a1f3a; padding: 25px; border-radius: 10px; border: 1px solid #2d3548;"><p style="color: #888; margin-bottom: 10px;">Efici�ncia</p><p style="font-size: 32px; font-weight: bold; color: #4ade80;">94%</p><p style="color: #888; font-size: 14px;">+3% este m�s</p></div></div><div style="background: #1a1f3a; padding: 25px; border-radius: 10px; border: 1px solid #2d3548;"><h3 style="color: #4ade80; margin-bottom: 20px;">Hist�rico de Miss�es</h3><div style="height: 200px; display: flex; align-items: flex-end; gap: 10px;"><div style="flex: 1; background: #4ade80; border-radius: 5px 5px 0 0; height: 60%;"></div><div style="flex: 1; background: #4ade80; border-radius: 5px 5px 0 0; height: 80%;"></div><div style="flex: 1; background: #4ade80; border-radius: 5px 5px 0 0; height: 70%;"></div><div style="flex: 1; background: #4ade80; border-radius: 5px 5px 0 0; height: 90%;"></div><div style="flex: 1; background: #4ade80; border-radius: 5px 5px 0 0; height: 100%;"></div></div></div></div>'}function b(){return'<div class="container"><h2 style="margin: 30px 0 20px; font-size: 28px;">Ve�culo EVOR X30</h2><div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px;"><div><img src="/evor-x30.jpg" alt="EVOR X30" style="width: 100%; border-radius: 10px; border: 1px solid #2d3548;"></div><div style="background: #1a1f3a; padding: 25px; border-radius: 10px; border: 1px solid #2d3548;"><h3 style="color: #4ade80; margin-bottom: 20px;">Especifica��es</h3><div style="display: flex; flex-direction: column; gap: 15px;"><div><p style="color: #888; margin-bottom: 5px;">Modelo</p><p style="font-size: 18px;">EVOR X30</p></div><div><p style="color: #888; margin-bottom: 5px;">Autonomia</p><p style="font-size: 18px;">8 horas</p></div><div><p style="color: #888; margin-bottom: 5px;">Velocidade M�xima</p><p style="font-size: 18px;">25 km/h</p></div><div><p style="color: #888; margin-bottom: 5px;">Capacidade de Carga</p><p style="font-size: 18px;">500 kg</p></div></div></div></div><div style="background: #1a1f3a; padding: 25px; border-radius: 10px; border: 1px solid #2d3548;"><h3 style="color: #4ade80; margin-bottom: 20px;">Status do Sistema</h3><div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px;"><div><p style="color: #888; margin-bottom: 5px;">Motor</p><p style="color: #4ade80;">Operacional</p></div><div><p style="color: #888; margin-bottom: 5px;">Sensores</p><p style="color: #4ade80;">Operacional</p></div><div><p style="color: #888; margin-bottom: 5px;">C�meras</p><p style="color: #4ade80;">Operacional</p></div></div></div></div>'}class f{constructor(e){this.baseData={...e},this.listeners=[]}startSimulation(e=1e3){this.interval=setInterval(()=>{const t=this.generateRealisticData();this.notifyListeners(t)},e)}stopSimulation(){this.interval&&clearInterval(this.interval)}generateRealisticData(){const e=(i,a)=>i+(Math.random()-.5)*a,t=Math.max(0,e(this.baseData.speed,3)),n=t>1?e(this.baseData.flowRate,15):0;return this.baseData.speed=t,this.baseData.battery=Math.max(0,this.baseData.battery-.008),this.baseData.tankLevel=Math.max(0,this.baseData.tankLevel-.012),this.baseData.pressure=e(this.baseData.pressure,.2),this.baseData.flowRate=n,this.baseData.latitude+=(Math.random()-.5)*1e-4,this.baseData.longitude+=(Math.random()-.5)*1e-4,this.baseData.sprayWidth=e(this.baseData.sprayWidth,.5),this.baseData.gpsSignal=Math.min(100,e(this.baseData.gpsSignal,2)),{...this.baseData}}subscribe(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter(t=>t!==e)}}notifyListeners(e){this.listeners.forEach(t=>t(e))}}const y={speed:18.5,battery:73,tankLevel:45,pressure:3.2,flowRate:145,altitude:582,latitude:-23.4521,longitude:-51.9378,sprayWidth:28.5,gpsSignal:98,temperature:24};let o="dashboard",r=null;function c(){const s=document.querySelector("#app"),e=o==="dashboard"?p():o==="scenarios"?m():o==="missions"?g():o==="analytics"?x():b();s.innerHTML=`
    ${u()}
    <div class="app-container">
      ${v(o)}
      <main class="main-content">
        ${e}
      </main>
    </div>
  `,h()}function h(){document.querySelectorAll(".nav-button").forEach(t=>{t.addEventListener("click",()=>{o=t.dataset.page,c()})});const e=document.querySelectorAll(".period-btn");e.forEach(t=>{t.addEventListener("click",n=>{e.forEach(i=>i.classList.remove("active")),n.target.classList.add("active")})})}function w(){r&&r.stopSimulation(),r=new f(y),r.subscribe(s=>{if(o==="dashboard"){const e=document.querySelector(".main-content");e&&(e.innerHTML=p())}}),r.startSimulation(2e3)}c();w();window.addEventListener("beforeunload",()=>{r&&r.stopSimulation()});let d;window.addEventListener("beforeinstallprompt",s=>{s.preventDefault(),d=s,document.body.insertAdjacentHTML("beforeend",`
    <div class="install-prompt" id="installPrompt">
      <div class="install-prompt-text">
        <div class="install-prompt-title">Instalar FreeAgro Connect</div>
        <div class="install-prompt-desc">Acesse facilmente direto do seu celular</div>
      </div>
      <button class="install-btn" id="installBtn">Instalar</button>
      <button class="install-close" id="closeInstall">×</button>
    </div>
  `),document.getElementById("installBtn").addEventListener("click",async()=>{d.prompt();const{outcome:t}=await d.userChoice;console.log(`User response: ${t}`),document.getElementById("installPrompt").remove(),d=null}),document.getElementById("closeInstall").addEventListener("click",()=>{document.getElementById("installPrompt").remove()})});
